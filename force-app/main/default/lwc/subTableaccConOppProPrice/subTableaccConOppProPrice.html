<template>
    <lightning-card>
        <div style="font-size: medium;"><b>Selected Accounts</b></div>
        <table  class="slds-table slds-table_cell-buffer slds-table_bordered slds-table_col-bordered tablecls">
            <thead>
                <tr>
                    <th class="" scope="col"><div class="slds-truncate">Name</div></th>
                    <th class="" scope="col"><div class="slds-truncate">Phone</div></th>
                </tr>    
            </thead>
            <tbody>
                <template for:each={selectedAccountDetails} for:item="a">
                    <tr  key ={a.Id}>
                        <td class="Color" scope="col" >
                            <div class="slds-cell-edit slds-truncate"><lightning-icon  icon-name="standard:account" size="xx-small" ></lightning-icon><a data-id={a.Id}  onclick={navigateToRecord}>{a.Name}</a></div>
                        </td>
                        <td class="Color" scope="col">
                        
                        <div class="slds-truncate">{a.Phone}</div>
                        </td>    
                    </tr>
                        <tr key ={a.Id}> 
                            <td colspan="3">
                            <table class="slds-table slds-table_cell-buffer slds-table_bordered slds-table_col-bordered tablecls">
                            <thead>
                                <tr class="slds-line-height_reset">
                                    <th class="" scope="col" ><div class="slds-truncate">Name</div></th>
                                    <th class="" scope="col" ><div class="slds-truncate">Phone</div></th>
                                    
                                </tr>
                                
                            </thead>
                            <tbody>
                                <template for:each={a.Contacts} for:item="c" >
                                    <tr key={c.Id}>
                                        <td class="Color" scope="col">
                                            <div  class="slds-truncate"><lightning-icon  icon-name="standard:contact" size="xx-small" ></lightning-icon><a data-id={c.Id} onclick={navigateToRecord}>{c.Name}</a></div>
                                    </td>
                                        <td class="Color" scope="col">
                                            <div  class="slds-truncate">{c.Phone}</div>
                                        </td>
                                
                                    </tr>
                                    <template if:true={c.Opportunities}>         
                                   <tr key={c.Id}>
                                    <td colspan="3">  
                                        <table class="slds-table slds-table_cell-buffer slds-table_bordered slds-table_col-bordered tablecls">
                                            <thead>
                                                <tr class="slds-line-height_reset" >
                                                    <th class="" scope="col">
                                                        <div class="slds-truncate">Name</div></th>
                                                    <th class="" scope="col"><div class="slds-truncate">Phone</div></th>
                                                </tr>  
                                            </thead>
                                            <tbody>
                                                <template for:each={c.Opportunities} for:item="o">
                                                    <tr key={o.Id}>
                                                        <td class="Color" scope="col" >
                                                            
                                                            <div class="slds-truncate"><lightning-icon  icon-name="standard:opportunity" size="xx-small" ></lightning-icon><a data-id={o.Id} onclick={navigateToRecord}>{o.Name}</a></div>
                                                        </td>
                                                        <td class="Color" scope="col">
                                                            <div class="slds-truncate">{o.Phone}</div>
                                                        </td>
                                                    </tr> 
                                                    <template if:true={o.Products}>
                                                    <tr key={o.Id}>
                                                        <td colspan="2">
                                                            <table class="slds-table slds-table_cell-buffer slds-table_bordered slds-table_col-bordered tablecls">
                                                                <thead>
                                                                    <tr>
                                                                        <th class="" scope="col" ><div class="slds-truncate">Name</div></th>
                                                                        <th class="" scope="col" ><div class="slds-truncate">Phone</div></th>

                                                                    </tr>
                                                                    
                                                                </thead>
                                                            <tbody>
                                                                <template for:each={o.Products} for:item="po">
                                                                    <tr key={po.Id}>
                                                                        <td class="Color" scope="col" >
                                                                           
                                                                            <div class="slds-truncate"><lightning-icon  icon-name="standard:product" size="xx-small" ></lightning-icon><a data-id={po.Id} onclick={navigateToRecord}>{po.Name}</a></div>
                                                                        </td>
                                                                        <td class="Color" scope="col" >
                                                                            
                                                                            <div class="slds-truncate">{po.Phone}</div> 
                                                                            </td>   
                                                                    </tr>
                                                                    <template if:true={po.PriceBooks}>
                                                                    <tr key={po.Id}>
                                                                        <td colspan="2">
                                                                            <table class="slds-table table-hover slds-table_bordered slds-table_cell-buffer slds-table_resizable-cols ">
                                                                                <thead>
                                                                                    <tr class="slds-line-height_reset">
                                                                                        <th class="" scope="col" ><div class="slds-truncate">Name</div></th>
                                                                                        <th class="" scope="col" ><div class="slds-truncate">Phone</div></th>
                                                            
                                                                                    </tr>
                                                                                    
                                                                                </thead>
                                                                                <tbody>
                                                                                    <template for:each={po.PriceBooks} for:item="pri">
                                                                                        <tr key={pri.Id}>
                                                                                            <td class="Color" scope="col" >
                                                                                                
                                                                                                <div class="slds-truncate"><lightning-icon  icon-name="standard:price_books" size="xx-small" ></lightning-icon><a data-id={pri.Id} onclick={navigateToRecord}>{pri.Name}</a></div>
                                                                                            
                                                                                            </td>
                                                                                            <td class="Color" scope="col">
                                                                                                
                                                                                                <div class="slds-truncate">{pri.Phone} </div>
                                                                                        
                                                                                            </td>
                                                                    
                                                                                        </tr>
                                                                                    </template>
                                                                                </tbody>
                                                                            </table>
                                                                        </td>
                                                                        
                                                                    </tr>
                                                                    </template>
                                                                </template>
                                                            </tbody>
    
                                                            </table>
                                                        </td>
                                                       
                                                    </tr>
                                                </template>   
                                                </template>
                                            
                                            </tbody>
                                        </table>
                                    </td> 
                                   </tr>
                                </template> 
                            </template>
                            </tbody>
                        </table>
                    </td>   
                </tr>
                </template>
            </tbody>
           </table>  
    </lightning-card>
</template>